# Vision Mamba 详细数据流动过程

## 你的理解 vs 实际实现对比

你的理解基本正确，但有几个关键细节需要修正：

### ✅ 正确的部分：
1. 输入图片 → PatchEmbed → Norm
2. 分成两路处理（双向）
3. 前向和后向都有 Conv1d → SSM
4. 有门控机制（gating）
5. 最后相加并投影输出

### ❌ 需要修正的部分：
1. **不是分成a、b两路**，而是**同一个输入x分别走前向和后向路径**
2. **z不是来自另一路**，而是来自同一个输入的另一个投影
3. **激活函数SiLU在多个位置使用**

## 完整的数据流动过程

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                     Vision Mamba Block 完整数据流                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  输入: hidden_states (B, L, D)                                        │
│  ↓                                                                   │
